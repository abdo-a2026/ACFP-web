<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ACFP โ Advanced Clinic Flow Platform</title>
<link rel="stylesheet" href="css/style.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%230B979C' width='100' height='100' rx='20'/><text x='50' y='70' text-anchor='middle' font-size='50' font-weight='900' fill='%23EAD39B' font-family='Arial'>A</text></svg>">

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>

<!-- ======================== LOADER ======================== -->
<div id="app-loader">
  <div class="loader-spinner"></div>
  <div id="loader-text">ุฌุงุฑู ุงูุชุญููู...</div>
</div>

<!-- ======================== LOGIN PAGE ======================== -->
<div id="login-page" style="display:flex">
  <div class="login-card">
    <div class="login-logo">
      <div class="logo-icon">
        <span class="acfp-logo">ACFP</span>
      </div>
      <h1>Advanced Clinic Flow Platform</h1>
      <p>ูุธุงู ุฅุฏุงุฑุฉ ุนูุงุฏุงุช ูุชูุฏู ูุฐูู</p>
    </div>
    <div class="login-form">
      <div class="form-group">
        <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
        <input type="email" id="login-email" class="form-input" placeholder="admin@acfp.clinic">
      </div>
      <div class="form-group">
        <label class="form-label">ูููุฉ ุงููุฑูุฑ</label>
        <input type="password" id="login-password" class="form-input" placeholder="โขโขโขโขโขโขโขโข">
      </div>
      <button id="btn-login" class="btn btn-primary btn-lg btn-block">
        <i class="fas fa-sign-in-alt"></i> ุชุณุฌูู ุงูุฏุฎูู
      </button>
      <button id="btn-demo" class="btn btn-warning btn-block">
        <i class="fas fa-flask"></i> ุงููุถุน ุงูุชุฌุฑูุจู (ุจูุงูุงุช ุนุฑุงููุฉ)
      </button>
    </div>
    <p style="text-align:center;font-size:10px;color:rgba(209,229,230,0.6);margin-top:20px">
      ACFP v2.0 โ Made in Iraq ๐ฎ๐ถ
    </p>
  </div>
</div>

<!-- ======================== LOCK SCREEN ======================== -->
<div id="lock-screen">
  <div class="lock-card">
    <div style="font-size:48px;margin-bottom:16px"><i class="fas fa-lock"></i></div>
    <h2 style="font-size:18px;font-weight:700;margin-bottom:8px">ุงูุฌูุณุฉ ููููุฉ</h2>
    <p style="font-size:13px;color:var(--text-muted);margin-bottom:24px">ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ูููุชุงุจุนุฉ</p>
    <div class="form-group" style="margin-bottom:16px">
      <input type="password" id="lock-password" class="form-input" placeholder="ูููุฉ ุงููุฑูุฑ" style="text-align:center">
    </div>
    <button id="btn-unlock" class="btn btn-primary btn-block"><i class="fas fa-unlock"></i> ุฅูุบุงุก ุงูููู</button>
  </div>
</div>

<!-- ======================== MAIN APP ======================== -->
<div id="app">

  <!-- MOBILE HEADER -->
  <header class="mobile-header">
    <div class="mobile-logo">
      <span class="acfp-text">ACFP</span>
    </div>
    <div class="mobile-fab-container">
      <button class="mobile-fab warning" onclick="UI.openModal('filter-modal')" title="ููุชุฑุฉ">
        <i class="fas fa-filter"></i>
      </button>
      <button class="mobile-fab" id="mobile-btn-add-booking" title="ุญุฌุฒ ุฌุฏูุฏ">
        <i class="fas fa-calendar-plus"></i>
      </button>
      <button class="mobile-fab success" id="mobile-btn-add-patient" title="ูุฑูุถ ุฌุฏูุฏ">
        <i class="fas fa-user-plus"></i>
      </button>
    </div>
  </header>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-brand">
      <div class="brand-icon">
        <span class="acfp-text">ACFP</span>
      </div>
      <div class="brand-text">
        <div class="brand-name" id="clinic-name-display">ACFP</div>
        <div class="brand-sub">ูุธุงู ุฅุฏุงุฑุฉ ูุชูุงูู</div>
      </div>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-section-label">ุงูููุงุฆู</div>
      <div class="nav-item active" data-page="dashboard">
        <span class="nav-icon"><i class="fas fa-chart-line"></i></span> ููุญุฉ ุงูุชุญูู
      </div>
      <div class="nav-item" data-page="bookings">
        <span class="nav-icon"><i class="fas fa-calendar-alt"></i></span> ุงูุญุฌูุฒุงุช
      </div>
      <div class="nav-item" data-page="patients">
        <span class="nav-icon"><i class="fas fa-users"></i></span> ุงููุฑุถู
      </div>
      <div class="nav-item" data-page="analytics">
        <span class="nav-icon"><i class="fas fa-chart-bar"></i></span> ุงูุชุญูููุงุช
      </div>
      <div class="nav-item" data-page="settings">
        <span class="nav-icon"><i class="fas fa-cog"></i></span> ุงูุฅุนุฏุงุฏุงุช
      </div>
    </div>

    <div class="sidebar-actions">
      <button id="btn-sidebar-booking" class="btn btn-primary btn-block">
        <i class="fas fa-calendar-plus"></i> ุชุณุฌูู ุญุฌุฒ
      </button>
      <button id="btn-sidebar-patient" class="btn btn-success btn-block">
        <i class="fas fa-user-plus"></i> ุชุณุฌูู ูุฑูุถ
      </button>
      <button id="btn-logout" class="btn btn-ghost btn-block" style="margin-top:8px">
        <i class="fas fa-sign-out-alt"></i> ุชุณุฌูู ุงูุฎุฑูุฌ
      </button>
    </div>
  </aside>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="topbar-left">
      <div>
        <div class="topbar-title" id="topbar-title">ููุญุฉ ุงูุชุญูู</div>
        <div class="topbar-subtitle" id="topbar-subtitle">ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุฃุฏุงุก</div>
      </div>
      <div style="position:relative">
        <button id="btn-filter" class="btn btn-secondary btn-sm">
          <i class="fas fa-search"></i> ููุชุฑุฉ
        </button>
        <span id="filter-badge" class="badge badge-blue" style="position:absolute;top:-8px;right:-8px;display:none;min-width:18px;height:18px;padding:0;justify-content:center;font-size:10px"></span>
      </div>
      <button id="btn-export-btn" class="btn btn-secondary btn-sm"><i class="fas fa-file-export"></i> ุชุตุฏูุฑ</button>
    </div>
    <div class="topbar-right">
      <div id="status-dot" class="status-dot">โ ูุชุตู</div>
      <div class="topbar-user">
        <div class="user-avatar">A</div>
        <div class="user-info">
          <div class="user-name">ุงููุณุคูู</div>
          <div class="user-role">Admin</div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="main-content">

    <!-- PERIOD FILTER CHIPS -->
    <div class="filter-bar" style="margin-bottom:20px">
      <span class="filter-label">ุนุฑุถ:</span>
      <span class="filter-chip active" data-period=""><i class="fas fa-clipboard-list"></i> ุงููู</span>
      <span class="filter-chip" data-period="today"><i class="fas fa-calendar-alt"></i> ุงูููู</span>
      <span class="filter-chip" data-period="week"><i class="fas fa-calendar-week"></i> ุงูุฃุณุจูุน</span>
      <span class="filter-chip" data-period="month"><i class="fas fa-calendar"></i> ุงูุดูุฑ</span>
      <div class="filter-divider"></div>
      <button id="btn-add-booking" class="btn btn-primary btn-sm">+ ุญุฌุฒ ุฌุฏูุฏ</button>
      <button id="btn-add-patient" class="btn btn-success btn-sm">+ ูุฑูุถ ุฌุฏูุฏ</button>
    </div>

    <!-- ======== DASHBOARD PAGE ======== -->
    <div id="page-dashboard" class="page active">

      <!-- STATS GRID -->
      <div class="stats-grid">
        <div class="stat-card" style="--accent-color:var(--accent-blue)">
          <div class="stat-icon" style="background:rgba(59,130,246,0.15);color:var(--accent-blue)"><i class="fas fa-calendar-alt"></i></div>
          <div class="stat-value" id="stat-total-bookings">0</div>
          <div class="stat-label">ุฅุฌูุงูู ุงูุญุฌูุฒุงุช</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-icon" style="background:rgba(16,185,129,0.15);color:var(--accent-emerald)"><i class="fas fa-users"></i></div>
          <div class="stat-value" id="stat-total-patients">0</div>
          <div class="stat-label">ุฅุฌูุงูู ุงููุฑุงุฌุนูู</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-teal)">
          <div class="stat-icon" style="background:rgba(20,184,166,0.15);color:var(--accent-teal)"><i class="fas fa-check-circle"></i></div>
          <div class="stat-value" id="stat-attendance">0%</div>
          <div class="stat-label">ูุณุจุฉ ุงูุญุถูุฑ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-amber)">
          <div class="stat-icon" style="background:rgba(245,158,11,0.15);color:var(--accent-amber)"><i class="fas fa-exclamation-triangle"></i></div>
          <div class="stat-value" id="stat-noshow">0%</div>
          <div class="stat-label">ูุณุจุฉ ุนุฏู ุงูุญุถูุฑ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-cyan)">
          <div class="stat-icon" style="background:rgba(6,182,212,0.15);color:var(--accent-cyan)"><i class="fas fa-coins"></i></div>
          <div class="stat-value" id="stat-revenue" style="font-size:18px">โ</div>
          <div class="stat-label">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-icon" style="background:rgba(16,185,129,0.15);color:var(--accent-emerald)"><i class="fas fa-chart-line"></i></div>
          <div class="stat-value" id="stat-profit" style="font-size:18px">โ</div>
          <div class="stat-label">ุตุงูู ุงูุฑุจุญ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-violet)">
          <div class="stat-icon" style="background:rgba(139,92,246,0.15);color:var(--accent-violet)"><i class="fas fa-calculator"></i></div>
          <div class="stat-value" id="stat-avg-profit" style="font-size:18px">โ</div>
          <div class="stat-label">ูุชูุณุท ุฑุจุญ ุงููุฑุงุฌุน</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-violet)">
          <div class="stat-icon" style="background:rgba(139,92,246,0.15);color:var(--accent-violet)"><i class="fas fa-walking"></i></div>
          <div class="stat-value" id="stat-walkin">0</div>
          <div class="stat-label">ูุฑุงุฌุนูู ุจูุง ุญุฌุฒ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-icon" style="background:rgba(16,185,129,0.15);color:var(--accent-emerald)"><i class="fas fa-link"></i></div>
          <div class="stat-value" id="stat-converted">0</div>
          <div class="stat-label">ูุญูููู ูู ุญุฌุฒ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-amber)">
          <div class="stat-icon" style="background:rgba(245,158,11,0.15);color:var(--accent-amber)"><i class="fas fa-trophy"></i></div>
          <div class="stat-value" id="stat-top-doctor" style="font-size:15px">โ</div>
          <div class="stat-label">ุฃุนูู ุทุจูุจ ุฃุฑุจุงุญุงู</div>
        </div>
      </div>

      <!-- CHARTS ROW 1 -->
      <div class="charts-grid">
        <div class="chart-card">
          <div class="chart-header">
            <div>
              <div class="chart-title">ุงูุญุฌูุฒุงุช ูุงููุฑุงุฌุนูู (ุขุฎุฑ 7 ุฃูุงู)</div>
              <div class="chart-subtitle">
                <span style="color:var(--accent-blue)">โ</span> ุงูุญุฌูุฒุงุช &nbsp;
                <span style="color:var(--accent-emerald)">โ</span> ุงููุฑุงุฌุนูู
              </div>
            </div>
          </div>
          <div style="height:180px"><canvas id="chart-bookings" style="width:100%;height:100%"></canvas></div>
        </div>
        <div class="chart-card">
          <div class="chart-header">
            <div>
              <div class="chart-title">ูุตุงุฏุฑ ุงูุญุฌูุฒุงุช</div>
              <div class="chart-subtitle">ุชูุฒูุน ูุณุจู</div>
            </div>
          </div>
          <div style="display:flex;justify-content:center;align-items:center;height:180px">
            <canvas id="chart-sources" style="width:160px;height:160px"></canvas>
          </div>
        </div>
      </div>

      <!-- CHARTS ROW 2 -->
      <div class="charts-grid">
        <div class="chart-card">
          <div class="chart-header">
            <div>
              <div class="chart-title">ุตุงูู ุงูุฑุจุญ ุงููููู</div>
              <div class="chart-subtitle"><span style="color:var(--accent-amber)">โ</span> ุงูุฃุฑุจุงุญ</div>
            </div>
          </div>
          <div style="height:180px"><canvas id="chart-revenue" style="width:100%;height:100%"></canvas></div>
        </div>
        <div class="chart-card">
          <div class="chart-header">
            <div>
              <div class="chart-title">ุฃุฑุจุงุญ ุงูุฃุทุจุงุก</div>
              <div class="chart-subtitle">ููุงุฑูุฉ ุตุงูู ุงูุฑุจุญ</div>
            </div>
          </div>
          <div style="height:180px"><canvas id="chart-doctors" style="width:100%;height:100%"></canvas></div>
        </div>
      </div>
    </div>

    <!-- ======== BOOKINGS PAGE ======== -->
    <div id="page-bookings" class="page">
      <div class="page-header">
        <div>
          <div class="page-title"><i class="fas fa-calendar-alt"></i> ุงูุญุฌูุฒุงุช</div>
          <div class="page-subtitle">ุฅุฏุงุฑุฉ ูุชุชุจุน ููุงุนูุฏ ุงููุฑุถู</div>
        </div>
        <button id="btn-add-booking-2" class="btn btn-primary">+ ุฅุถุงูุฉ ุญุฌุฒ</button>
      </div>

      <div class="table-container">
        <div class="table-header">
          <div>
            <div class="table-title">ุฌุฏูู ุงูุญุฌูุฒุงุช</div>
            <div class="table-count" id="bookings-count">0 ุญุฌุฒ</div>
          </div>
          <div class="table-actions">
            <div class="search-box">
              <span class="search-icon"><i class="fas fa-search"></i></span>
              <input type="text" id="search-bookings" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงููุงุชู...">
            </div>
            <input type="date" id="filter-booking-date" class="form-input" placeholder="ุชุตููุฉ ุญุณุจ ุชุงุฑูุฎ ุงูููุนุฏ" style="width:auto;min-width:160px" title="ุชุตููุฉ ุญุณุจ ุชุงุฑูุฎ ุงูููุนุฏ">
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>ุงูุฑูู</th>
                <th>ุงุณู ุงููุฑูุถ</th>
                <th>ุงููุงุชู</th>
                <th>ุงูุทุจูุจ</th>
                <th>ุชุงุฑูุฎ ุงูููุนุฏ</th>
                <th>ุงูููุช</th>
                <th>ุงููุตุฏุฑ</th>
                <th>ุงูุญุงูุฉ</th>
                <th>ุงููุฑุงุฌุนุฉ</th>
                <th>ุชุงุฑูุฎ ุงูุชุณุฌูู</th>
                <th>ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="bookings-tbody">
              <tr><td colspan="11"><div class="table-empty"><div class="empty-icon"><i class="fas fa-calendar-times"></i></div><p>ูุง ุชูุฌุฏ ุญุฌูุฒุงุช</p></div></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ======== PATIENTS PAGE ======== -->
    <div id="page-patients" class="page">
      <div class="page-header">
        <div>
          <div class="page-title"><i class="fas fa-users"></i> ุงููุฑุถู</div>
          <div class="page-subtitle">ุณุฌูุงุช ุงููุฑุงุฌุนูู ูุงูุฃุฑุจุงุญ</div>
        </div>
        <button id="btn-add-patient-2" class="btn btn-success">+ ุชุณุฌูู ูุฑูุถ</button>
      </div>

      <!-- Profit Summary -->
      <div class="profit-summary">
        <div class="stat-card" style="--accent-color:var(--accent-cyan)">
          <div class="stat-label">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</div>
          <div class="stat-value" id="patients-total-rev" style="font-size:18px;color:var(--accent-cyan)">โ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-rose)">
          <div class="stat-label">ุฅุฌูุงูู ุงููุตุงุฑูู</div>
          <div class="stat-value" id="patients-total-exp" style="font-size:18px;color:var(--accent-rose)">โ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-label">ุตุงูู ุงูุฑุจุญ</div>
          <div class="stat-value" id="patients-total-net" style="font-size:18px;color:var(--accent-emerald)">โ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-blue)">
          <div class="stat-label">ุนุฏุฏ ุงููุฑุถู</div>
          <div class="stat-value" id="patients-count" style="font-size:24px">โ</div>
        </div>
      </div>

      <div class="table-container">
        <div class="table-header">
          <div>
            <div class="table-title">ุณุฌู ุงููุฑุถู</div>
          </div>
          <div class="table-actions">
            <div class="search-box">
              <span class="search-icon"><i class="fas fa-search"></i></span>
              <input type="text" id="search-patients" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงููุงุชู...">
            </div>
          </div>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>ุงูุฑูู</th>
                <th>ุงูุงุณู ุงููุงูู</th>
                <th>ุงููุงุชู</th>
                <th>ุงูุฌูุณ</th>
                <th>ุงูุนูุฑ</th>
                <th>ุงูููุทูุฉ</th>
                <th>ุงูุทุจูุจ</th>
                <th>ุงูุฎุฏูุฉ</th>
                <th>ุงูุณุนุฑ</th>
                <th>ุงููุตุงุฑูู</th>
                <th>ุตุงูู ุงูุฑุจุญ</th>
                <th>ููุน ุงูุฒูุงุฑุฉ</th>
                <th>ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="patients-tbody">
              <tr><td colspan="13"><div class="table-empty"><div class="empty-icon"><i class="fas fa-user-times"></i></div><p>ูุง ุชูุฌุฏ ุณุฌูุงุช</p></div></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ======== ANALYTICS PAGE ======== -->
    <div id="page-analytics" class="page">
      <div class="page-header">
        <div>
          <div class="page-title">๐ ุงูุชุญูููุงุช ุงููุชูุฏูุฉ</div>
          <div class="page-subtitle">ุชูุงุฑูุฑ ูุฅุญุตุงุกุงุช ุดุงููุฉ</div>
        </div>
      </div>

      <!-- Analytics Stats -->
      <div class="stats-grid">
        <div class="stat-card" style="--accent-color:var(--accent-blue)">
          <div class="stat-icon" style="background:rgba(59,130,246,0.15);color:var(--accent-blue)"><i class="fas fa-calendar-alt"></i></div>
          <div class="stat-value" id="an-total-bookings">โ</div>
          <div class="stat-label">ุฅุฌูุงูู ุงูุญุฌูุฒุงุช</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-icon" style="background:rgba(16,185,129,0.15);color:var(--accent-emerald)"><i class="fas fa-check-circle"></i></div>
          <div class="stat-value" id="an-attendance">โ</div>
          <div class="stat-label">ูุนุฏู ุงูุญุถูุฑ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-amber)">
          <div class="stat-icon" style="background:rgba(245,158,11,0.15);color:var(--accent-amber)"><i class="fas fa-exclamation-triangle"></i></div>
          <div class="stat-value" id="an-noshow">โ</div>
          <div class="stat-label">ูุนุฏู ุนุฏู ุงูุญุถูุฑ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-rose)">
          <div class="stat-icon" style="background:rgba(244,63,94,0.15);color:var(--accent-rose)">โ</div>
          <div class="stat-value" id="an-cancel">โ</div>
          <div class="stat-label">ุงูุญุฌูุฒุงุช ุงูููุบุงุฉ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-teal)">
          <div class="stat-icon" style="background:rgba(20,184,166,0.15);color:var(--accent-teal)"><i class="fas fa-users"></i></div>
          <div class="stat-value" id="an-total-patients">โ</div>
          <div class="stat-label">ุฅุฌูุงูู ุงููุฑุงุฌุนูู</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-violet)">
          <div class="stat-icon" style="background:rgba(139,92,246,0.15);color:var(--accent-violet)"><i class="fas fa-walking"></i></div>
          <div class="stat-value" id="an-walkin">โ</div>
          <div class="stat-label">ูุฑุงุฌุนูู ุจูุง ุญุฌุฒ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-icon" style="background:rgba(16,185,129,0.15);color:var(--accent-emerald)"><i class="fas fa-link"></i></div>
          <div class="stat-value" id="an-converted">โ</div>
          <div class="stat-label">ูุญูููู ูู ุญุฌุฒ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-cyan)">
          <div class="stat-icon" style="background:rgba(6,182,212,0.15);color:var(--accent-cyan)">๐ฏ</div>
          <div class="stat-value" id="an-conversion-rate">โ</div>
          <div class="stat-label">ูุนุฏู ุงูุชุญููู</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-cyan)">
          <div class="stat-icon" style="background:rgba(6,182,212,0.15);color:var(--accent-cyan)"><i class="fas fa-coins"></i></div>
          <div class="stat-value" id="an-total-revenue" style="font-size:16px">โ</div>
          <div class="stat-label">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-rose)">
          <div class="stat-icon" style="background:rgba(244,63,94,0.15);color:var(--accent-rose)">๐</div>
          <div class="stat-value" id="an-total-expenses" style="font-size:16px">โ</div>
          <div class="stat-label">ุฅุฌูุงูู ุงููุตุงุฑูู</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-emerald)">
          <div class="stat-icon" style="background:rgba(16,185,129,0.15);color:var(--accent-emerald)"><i class="fas fa-chart-line"></i></div>
          <div class="stat-value" id="an-net-profit" style="font-size:16px">โ</div>
          <div class="stat-label">ุตุงูู ุงูุฑุจุญ</div>
        </div>
        <div class="stat-card" style="--accent-color:var(--accent-violet)">
          <div class="stat-icon" style="background:rgba(139,92,246,0.15);color:var(--accent-violet)"><i class="fas fa-calculator"></i></div>
          <div class="stat-value" id="an-avg-profit" style="font-size:16px">โ</div>
          <div class="stat-label">ูุชูุณุท ุงูุฑุจุญ</div>
        </div>
      </div>

      <!-- Gender Stats -->
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px">
        <div class="card" style="display:flex;align-items:center;gap:20px">
          <div style="font-size:32px"><i class="fas fa-male"></i></div>
          <div>
            <div style="font-size:26px;font-weight:700;color:var(--accent-blue)" id="an-male">0</div>
            <div style="font-size:12px;color:var(--text-muted)">ูุฑุงุฌุนูู ุฐููุฑ</div>
          </div>
          <div style="margin-right:auto;font-size:32px"><i class="fas fa-female"></i></div>
          <div>
            <div style="font-size:26px;font-weight:700;color:var(--accent-violet)" id="an-female">0</div>
            <div style="font-size:12px;color:var(--text-muted)">ูุฑุงุฌุนุงุช ุฅูุงุซ</div>
          </div>
        </div>
        <div class="chart-card">
          <div class="chart-title" style="margin-bottom:12px">ูุตุงุฏุฑ ุงูุญุฌูุฒุงุช</div>
          <div style="display:flex;justify-content:center;align-items:center;height:140px">
            <canvas id="chart-an-sources" style="width:140px;height:140px"></canvas>
          </div>
        </div>
      </div>

      <!-- Charts and Lists -->
      <div class="analytics-grid">
        <div class="analytics-card">
          <div class="analytics-title"><i class="fas fa-trophy"></i> ุงูุฃุทุจุงุก ุญุณุจ ุงูุฑุจุญ</div>
          <div class="analytics-list" id="an-doctor-list"></div>
        </div>
        <div class="analytics-card">
          <div class="analytics-title"><i class="fas fa-pills"></i> ุงูุฎุฏูุงุช ุงูุฃูุซุฑ ุทูุจุงู</div>
          <div class="analytics-list" id="an-service-list"></div>
        </div>
        <div class="analytics-card">
          <div class="analytics-title"><i class="fas fa-satellite-dish"></i> ูุตุงุฏุฑ ุงูุญุฌูุฒุงุช</div>
          <div class="analytics-list" id="an-source-list"></div>
        </div>
      </div>

      <!-- Charts -->
      <div class="charts-grid">
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">ุงููุฑุงุฌุนูู ุงููููู</div>
          </div>
          <div style="height:180px"><canvas id="chart-an-patients" style="width:100%;height:100%"></canvas></div>
        </div>
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">ุงูุฑุจุญ ุงููููู</div>
          </div>
          <div style="height:180px"><canvas id="chart-an-revenue" style="width:100%;height:100%"></canvas></div>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">ุฃุฏุงุก ุงูุฃุทุจุงุก (ุตุงูู ุงูุฑุจุญ)</div>
        </div>
        <div style="height:200px"><canvas id="chart-an-doctors" style="width:100%;height:100%"></canvas></div>
      </div>
    </div>

    <!-- ======== SETTINGS PAGE ======== -->
    <div id="page-settings" class="page">
      <div class="page-header">
        <div>
          <div class="page-title"><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช</div>
          <div class="page-subtitle">ุชุฎุตูุต ุงููุธุงู ูุฅุนุฏุงุฏุงุชู</div>
        </div>
      </div>

      <!-- Mobile Profile Section -->
      <div class="mobile-settings-profile">
        <div class="mobile-settings-logo">
          <span class="acfp-text">ACFP</span>
        </div>
        <div class="mobile-settings-info">
          <div class="mobile-settings-title">Advanced Clinic Flow Platform</div>
          <div class="mobile-settings-subtitle">ูุธุงู ุฅุฏุงุฑุฉ ุนูุงุฏุงุช ูุชูุฏู</div>
          <div class="mobile-account-badge demo" id="mobile-account-type">
            <i class="fas fa-flask"></i> ุญุณุงุจ ุชุฌุฑูุจู
          </div>
        </div>
      </div>

      <div class="settings-grid">
        <!-- Profit Settings -->
        <div class="settings-card">
          <div class="settings-title"><i class="fas fa-coins"></i> ุชูุฒูุน ูุณุจ ุงูุฃุฑุจุงุญ</div>
          <div class="settings-desc">ุชุญุฏูุฏ ุงููุณุจ ุงููุฆููุฉ ูุชูุฒูุน ุตุงูู ุงูุฑุจุญ</div>

          <div class="range-group">
            <div class="range-header">
              <span class="range-label"><i class="fas fa-stethoscope"></i> ุญุตุฉ ุงูุทุจูุจ</span>
              <span class="range-value" id="range-doctor-display">40%</span>
            </div>
            <input type="range" id="range-doctor" min="0" max="100" value="40">
          </div>
          <div class="range-group">
            <div class="range-header">
              <span class="range-label"><i class="fas fa-clinic-medical"></i> ุญุตุฉ ุงูุนูุงุฏุฉ</span>
              <span class="range-value" id="range-clinic-display">40%</span>
            </div>
            <input type="range" id="range-clinic" min="0" max="100" value="40">
          </div>
          <div class="range-group">
            <div class="range-header">
              <span class="range-label">๐ป ุญุตุฉ ุงูููุตุฉ</span>
              <span class="range-value" id="range-platform-display">20%</span>
            </div>
            <input type="range" id="range-platform" min="0" max="100" value="20">
          </div>

          <div id="ranges-total" style="text-align:center;font-size:12px;margin:8px 0;color:var(--accent-emerald)">ุงููุฌููุน: 100%</div>
          <button id="btn-save-profit-settings" class="btn btn-primary btn-block">๐พ ุญูุธ ุงููุณุจ</button>
        </div>

        <!-- General Settings -->
        <div class="settings-card">
          <div class="settings-title"><i class="fas fa-clinic-medical"></i> ุฅุนุฏุงุฏุงุช ุงูุนูุงุฏุฉ</div>
          <div class="settings-desc">ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ูุงูุชูุถููุงุช</div>

          <div class="form-group" style="margin-bottom:16px">
            <label class="form-label">ุงุณู ุงูุนูุงุฏุฉ</label>
            <input type="text" id="setting-clinic-name" class="form-input" placeholder="ACFP">
          </div>

          <div class="toggle-switch">
            <div>
              <div class="toggle-label"><i class="fas fa-moon"></i> ุงููุถุน ุงูุฏุงูู</div>
              <div class="toggle-desc">ุงูุชุจุฏูู ุจูู ุงููุถุน ุงูุฏุงูู ูุงููุงุชุญ</div>
            </div>
            <div class="toggle on" id="toggle-dark-mode"></div>
          </div>
          <div class="toggle-switch">
            <div>
              <div class="toggle-label"><i class="fas fa-bell"></i> ุงูุฅุดุนุงุฑุงุช</div>
              <div class="toggle-desc">ุชูุจููุงุช ุงูุญุฌูุฒุงุช ุงูุฌุฏูุฏุฉ</div>
            </div>
            <div class="toggle on"></div>
          </div>
          <div class="toggle-switch">
            <div>
              <div class="toggle-label"><i class="fas fa-link"></i> ุงูุฑุจุท ุงูุชููุงุฆู</div>
              <div class="toggle-desc">ุฑุจุท ุงูุญุฌุฒ ุจุงููุฑูุถ ุชููุงุฆูุงู</div>
            </div>
            <div class="toggle on"></div>
          </div>
          <div class="toggle-switch">
            <div>
              <div class="toggle-label"><i class="fas fa-database"></i> Firebase</div>
              <div class="toggle-desc">ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ</div>
            </div>
            <div class="toggle" id="toggle-firebase"></div>
          </div>

          <button id="btn-save-settings" class="btn btn-success btn-block" style="margin-top:16px">
            <i class="fas fa-save"></i> ุญูุธ ุงูุฅุนุฏุงุฏุงุช
          </button>
        </div>

        <!-- Doctors -->
        <div class="settings-card">
          <div class="settings-title"><i class="fas fa-stethoscope"></i> ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก</div>
          <div class="settings-desc">ุฅุถุงูุฉ ูุญุฐู ุงูุฃุทุจุงุก ูู ุงููุธุงู</div>

          <div style="display:flex;gap:8px;margin-bottom:16px">
            <input type="text" id="new-doctor" class="form-input" placeholder="ุงุณู ุงูุทุจูุจ ุงูุฌุฏูุฏ">
            <button onclick="App.addDoctor()" class="btn btn-primary">+ ุฅุถุงูุฉ</button>
          </div>
          <div id="doctors-list" style="max-height:220px;overflow-y:auto"></div>
        </div>

        <!-- Services -->
        <div class="settings-card">
          <div class="settings-title"><i class="fas fa-pills"></i> ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช</div>
          <div class="settings-desc">ุฅุถุงูุฉ ูุญุฐู ุฃููุงุน ุงูุฎุฏูุงุช ุงูุทุจูุฉ</div>

          <div style="display:flex;gap:8px;margin-bottom:16px">
            <input type="text" id="new-service" class="form-input" placeholder="ุงุณู ุงูุฎุฏูุฉ ุงูุฌุฏูุฏุฉ">
            <button onclick="App.addService()" class="btn btn-primary">+ ุฅุถุงูุฉ</button>
          </div>
          <div id="services-list" style="max-height:220px;overflow-y:auto"></div>
        </div>
      </div>

      <!-- Export Section -->
      <div class="settings-card" style="margin-top:20px">
        <div class="settings-title"><i class="fas fa-file-export"></i> ุชุตุฏูุฑ ุงูุจูุงูุงุช</div>
        <div class="settings-desc">ุชุตุฏูุฑ ุฌููุน ุงูุจูุงูุงุช ุจุชูุณูู CSV</div>
        <div class="export-grid">
          <div class="export-btn" onclick="App.exportBookings()">
            <div class="export-icon"><i class="fas fa-calendar-alt"></i></div>
            <div class="export-label">ุชุตุฏูุฑ ุงูุญุฌูุฒุงุช</div>
            <div class="export-desc">ุฌููุน ุจูุงูุงุช ุงูููุงุนูุฏ</div>
          </div>
          <div class="export-btn" onclick="App.exportPatients()">
            <div class="export-icon"><i class="fas fa-users"></i></div>
            <div class="export-label">ุชุตุฏูุฑ ุงููุฑุถู</div>
            <div class="export-desc">ุณุฌูุงุช ุงููุฑุงุฌุนูู ูุงูุฃุฑุจุงุญ</div>
          </div>
          <div class="export-btn" onclick="App.exportReport()">
            <div class="export-icon"><i class="fas fa-chart-line"></i></div>
            <div class="export-label">ุชูุฑูุฑ ุงูุฃุฑุจุงุญ</div>
            <div class="export-desc">ููุฎุต ุงููุคุดุฑุงุช ุงููุงููุฉ</div>
          </div>
        </div>
      </div>
    </div>

  </main><!-- end main-content -->

  <!-- MOBILE BOTTOM NAVIGATION -->
  <nav class="mobile-bottom-nav">
    <div class="mobile-nav-item active" data-page="dashboard">
      <i class="fas fa-chart-line nav-icon"></i>
      <span>ุงูุฑุฆูุณูุฉ</span>
    </div>
    <div class="mobile-nav-item" data-page="bookings">
      <i class="fas fa-calendar-alt nav-icon"></i>
      <span>ุงูุญุฌูุฒุงุช</span>
    </div>
    <div class="mobile-nav-item" data-page="patients">
      <i class="fas fa-users nav-icon"></i>
      <span>ุงููุฑุถู</span>
    </div>
    <div class="mobile-nav-item" data-page="analytics">
      <i class="fas fa-chart-bar nav-icon"></i>
      <span>ุงูุชุญูููุงุช</span>
    </div>
    <div class="mobile-nav-item" data-page="settings">
      <i class="fas fa-cog nav-icon"></i>
      <span>ุงูุฅุนุฏุงุฏุงุช</span>
    </div>
  </nav>

</div><!-- end app -->

<!-- ==================== TOAST CONTAINER ==================== -->
<div id="toast-container" class="toast-container"></div>

<!-- ==================== CONFIRM DIALOG ==================== -->
<div id="confirm-overlay" class="modal-overlay">
  <div class="modal" style="max-width:380px">
    <div class="modal-header">
      <div class="modal-title"><i class="fas fa-exclamation-triangle"></i> ุชุฃููุฏ ุงูุนูููุฉ</div>
    </div>
    <div class="modal-body">
      <p id="confirm-msg" style="color:var(--text-secondary);font-size:14px;text-align:center;padding:16px 0"></p>
    </div>
    <div class="modal-footer">
      <button id="confirm-no" class="btn btn-secondary">ุฅูุบุงุก</button>
      <button id="confirm-yes" class="btn btn-danger">ุชุฃููุฏ ุงูุญุฐู</button>
    </div>
  </div>
</div>

<!-- ==================== BOOKING MODAL ==================== -->
<div id="booking-modal" class="modal-overlay">
  <div class="modal modal-wide">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="booking-modal-title">ุฅุถุงูุฉ ุญุฌุฒ ุฌุฏูุฏ</div>
        <div class="modal-subtitle"><i class="fas fa-calendar-alt"></i> ุชุณุฌูู ููุนุฏ ุงููุฑูุถ</div>
      </div>
      <button class="modal-close" data-close-modal>โ</button>
    </div>
    <form id="booking-form">
      <div class="modal-body">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">ุงุณู ุงููุฑูุถ *</label>
            <input type="text" id="booking-name" class="form-input" placeholder="ุงูุงุณู ุงููุงูู" required>
          </div>
          <div class="form-group">
            <label class="form-label">ุฑูู ุงููุงุชู *</label>
            <input type="tel" id="booking-phone" class="form-input" placeholder="05XXXXXXXX" required dir="ltr">
          </div>
          <div class="form-group">
            <label class="form-label">ุงูุทุจูุจ *</label>
            <select id="booking-doctor" class="form-select" required>
              <option value="">ุงุฎุชุฑ ุงูุทุจูุจ</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ุชุงุฑูุฎ ุงูููุนุฏ *</label>
            <input type="date" id="booking-date" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">ููุช ุงูููุนุฏ</label>
            <input type="time" id="booking-time" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">ูุตุฏุฑ ุงูุญุฌุฒ</label>
            <select id="booking-source" class="form-select">
              <option value="phone">๐ ูุงุชู</option>
              <option value="whatsapp">๐ฌ ูุงุชุณุงุจ</option>
              <option value="walk-in"><i class="fas fa-walking"></i> ูุจุงุดุฑ</option>
              <option value="online">๐ ุฅูุชุฑูุช</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ุญุงูุฉ ุงูุญุฌุฒ</label>
            <select id="booking-status" class="form-select">
              <option value="scheduled"><i class="fas fa-calendar-alt"></i> ูุฌุฏูู</option>
              <option value="completed"><i class="fas fa-check-circle"></i> ููุชูู</option>
              <option value="canceled">โ ููุบู</option>
              <option value="no-show"><i class="fas fa-exclamation-triangle"></i> ูู ูุญุถุฑ</option>
            </select>
          </div>
          <div class="form-group form-full">
            <label class="form-label">ููุงุญุธุงุช</label>
            <textarea id="booking-notes" class="form-textarea" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ..."></textarea>
          </div>
        </div>
      </div>
    </form>
    <div class="modal-footer">
      <button class="btn btn-secondary" data-close-modal>ุฅูุบุงุก</button>
      <button id="btn-save-booking" class="btn btn-primary">๐พ ุญูุธ ุงูุญุฌุฒ</button>
    </div>
  </div>
</div>

<!-- ==================== PATIENT MODAL ==================== -->
<div id="patient-modal" class="modal-overlay">
  <div class="modal modal-wide">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="patient-modal-title">ุชุณุฌูู ูุฑูุถ ุฌุฏูุฏ</div>
        <div class="modal-subtitle">๐ค ุจูุงูุงุช ุงููุฑุงุฌุนุฉ ุงููุนููุฉ</div>
      </div>
      <button class="modal-close" data-close-modal>โ</button>
    </div>
    <form id="patient-form">
      <div class="modal-body">
        <!-- Personal Info -->
        <div class="form-section">
          <div class="form-section-title">๐ค ุงููุนูููุงุช ุงูุดุฎุตูุฉ</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">ุงูุงุณู ุงููุงูู *</label>
              <input type="text" id="patient-name" class="form-input" placeholder="ุงูุงุณู ุงูุฑุจุงุนู" required>
            </div>
            <div class="form-group">
              <label class="form-label">ุฑูู ุงููุงุชู *</label>
              <input type="tel" id="patient-phone" class="form-input" placeholder="05XXXXXXXX" required dir="ltr">
            </div>
            <div class="form-group">
              <label class="form-label">ุงูุฌูุณ</label>
              <select id="patient-gender" class="form-select">
                <option value="male"><i class="fas fa-male"></i> ุฐูุฑ</option>
                <option value="female"><i class="fas fa-female"></i> ุฃูุซู</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">ุชุงุฑูุฎ ุงููููุงุฏ</label>
              <input type="date" id="patient-birthdate" class="form-input">
            </div>
            <div class="form-group form-full">
              <label class="form-label">ุงูุนููุงู</label>
              <input type="text" id="patient-address" class="form-input" placeholder="ุงููุฏููุฉุ ุงูุญู">
            </div>
          </div>
        </div>

        <!-- Service Info -->
        <div class="form-section">
          <div class="form-section-title"><i class="fas fa-clinic-medical"></i> ูุนูููุงุช ุงูุฎุฏูุฉ</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">ุงูุทุจูุจ ุงููุนุงูุฌ *</label>
              <select id="patient-doctor" class="form-select" required>
                <option value="">ุงุฎุชุฑ ุงูุทุจูุจ</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">ููุน ุงูุฎุฏูุฉ *</label>
              <select id="patient-service" class="form-select" required>
                <option value="">ุงุฎุชุฑ ุงูุฎุฏูุฉ</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ</label>
              <input type="date" id="patient-date" class="form-input">
            </div>
          </div>
        </div>

        <!-- Financial Info -->
        <div class="form-section">
          <div class="form-section-title"><i class="fas fa-coins"></i> ุงููุนูููุงุช ุงููุงููุฉ</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">ุงูุณุนุฑ ุงูุฅุฌูุงูู (ุฑ.ุณ)</label>
              <input type="number" id="patient-price" class="form-input" placeholder="0.00" min="0" step="0.01">
            </div>
            <div class="form-group">
              <label class="form-label">ุงููุตุงุฑูู (ุฑ.ุณ)</label>
              <input type="number" id="patient-expenses" class="form-input" placeholder="0.00" min="0" step="0.01">
            </div>
          </div>

          <!-- Profit Preview -->
          <div class="profit-preview">
            <div class="profit-item">
              <div class="profit-value profit-net" id="preview-net">0 ุฑ.ุณ</div>
              <div class="profit-label"><i class="fas fa-chart-line"></i> ุตุงูู ุงูุฑุจุญ</div>
            </div>
            <div class="profit-item">
              <div class="profit-value profit-doctor" id="preview-doctor">0 ุฑ.ุณ</div>
              <div class="profit-label"><i class="fas fa-stethoscope"></i> ุญุตุฉ ุงูุทุจูุจ</div>
            </div>
            <div class="profit-item">
              <div class="profit-value profit-clinic" id="preview-clinic">0 ุฑ.ุณ</div>
              <div class="profit-label"><i class="fas fa-clinic-medical"></i> ุญุตุฉ ุงูุนูุงุฏุฉ</div>
            </div>
            <div class="profit-item">
              <div class="profit-value profit-platform" id="preview-platform">0 ุฑ.ุณ</div>
              <div class="profit-label">๐ป ุญุตุฉ ุงูููุตุฉ</div>
            </div>
          </div>
        </div>

        <!-- Medical Notes -->
        <div class="form-section" style="margin-bottom:0">
          <div class="form-section-title"><i class="fas fa-clipboard-list"></i> ููุงุญุธุงุช ุทุจูุฉ</div>
          <div class="form-group">
            <textarea id="patient-notes" class="form-textarea" placeholder="ุงูุญุณุงุณูุฉุ ุงูุฃูุฑุงุถ ุงููุฒููุฉุ ุงูููุงุญุธุงุช ุงูุทุจูุฉ..." style="min-height:100px"></textarea>
          </div>
        </div>
      </div>
    </form>
    <div class="modal-footer">
      <button class="btn btn-secondary" data-close-modal>ุฅูุบุงุก</button>
      <button id="btn-save-patient" class="btn btn-success">๐พ ุชุณุฌูู ุงููุฑูุถ</button>
    </div>
  </div>
</div>

<!-- ==================== FILTER MODAL ==================== -->
<div id="filter-modal" class="modal-overlay">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title"><i class="fas fa-search"></i> ุงูููุชุฑุฉ ุงูุดุงููุฉ</div>
        <div class="modal-subtitle">ุชุตููุฉ ุงูุจูุงูุงุช ุญุณุจ ุงููุนุงููุฑ</div>
      </div>
      <button class="modal-close" data-close-modal>โ</button>
    </div>
    <form id="filter-form">
      <div class="modal-body">
        <div class="filter-modal-grid">
          <div class="form-group">
            <label class="form-label">ุงูุทุจูุจ</label>
            <select id="filter-doctor" class="form-select">
              <option value="">ุฌููุน ุงูุฃุทุจุงุก</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ุงูุฎุฏูุฉ</label>
            <select id="filter-service" class="form-select">
              <option value="">ุฌููุน ุงูุฎุฏูุงุช</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ูุตุฏุฑ ุงูุญุฌุฒ</label>
            <select id="filter-source" class="form-select">
              <option value="">ุฌููุน ุงููุตุงุฏุฑ</option>
              <option value="phone">๐ ูุงุชู</option>
              <option value="whatsapp">๐ฌ ูุงุชุณุงุจ</option>
              <option value="walk-in"><i class="fas fa-walking"></i> ูุจุงุดุฑ</option>
              <option value="online">๐ ุฅูุชุฑูุช</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ุงูุฌูุณ</label>
            <select id="filter-gender" class="form-select">
              <option value="">ุงููู</option>
              <option value="male"><i class="fas fa-male"></i> ุฐูุฑ</option>
              <option value="female"><i class="fas fa-female"></i> ุฃูุซู</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ุญุงูุฉ ุงูุญุฌุฒ</label>
            <select id="filter-status" class="form-select">
              <option value="">ุงููู</option>
              <option value="scheduled">ูุฌุฏูู</option>
              <option value="completed">ููุชูู</option>
              <option value="canceled">ููุบู</option>
              <option value="no-show">ูู ูุญุถุฑ</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ุงููุชุฑุฉ ุงูุฒูููุฉ</label>
            <select id="filter-period" class="form-select">
              <option value="">ุงููู</option>
              <option value="today">ุงูููู</option>
              <option value="week">ุขุฎุฑ ุฃุณุจูุน</option>
              <option value="month">ุขุฎุฑ ุดูุฑ</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">ูู ุชุงุฑูุฎ</label>
            <input type="date" id="filter-date-from" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">ุฅูู ุชุงุฑูุฎ</label>
            <input type="date" id="filter-date-to" class="form-input">
          </div>
        </div>
      </div>
    </form>
    <div class="modal-footer">
      <button id="btn-clear-filter" class="btn btn-secondary">๐๏ธ ูุณุญ ุงูููุชุฑ</button>
      <button id="btn-apply-filter" class="btn btn-primary"><i class="fas fa-check-circle"></i> ุชุทุจูู ุงูููุชุฑ</button>
    </div>
  </div>
</div>

<!-- ==================== EXPORT MODAL ==================== -->
<div id="export-modal" class="modal-overlay">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title"><i class="fas fa-file-export"></i> ุชุตุฏูุฑ ุงูุจูุงูุงุช</div>
        <div class="modal-subtitle">ุชูุฒูู ุงูุจูุงูุงุช ุจุชูุณูู CSV</div>
      </div>
      <button class="modal-close" data-close-modal>โ</button>
    </div>
    <div class="modal-body">
      <div class="export-grid">
        <div class="export-btn" onclick="App.exportBookings();UI.closeAllModals()">
          <div class="export-icon"><i class="fas fa-calendar-alt"></i></div>
          <div class="export-label">ุงูุญุฌูุฒุงุช</div>
          <div class="export-desc">ุฌููุน ุจูุงูุงุช ุงูููุงุนูุฏ</div>
        </div>
        <div class="export-btn" onclick="App.exportPatients();UI.closeAllModals()">
          <div class="export-icon"><i class="fas fa-users"></i></div>
          <div class="export-label">ุงููุฑุถู</div>
          <div class="export-desc">ุณุฌูุงุช ุงููุฑุงุฌุนูู</div>
        </div>
        <div class="export-btn" onclick="App.exportReport();UI.closeAllModals()">
          <div class="export-icon"><i class="fas fa-chart-line"></i></div>
          <div class="export-label">ุชูุฑูุฑ ุงูุฃุฑุจุงุญ</div>
          <div class="export-desc">ููุฎุต ูุงูู ุดุงูู</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ==================== FIREBASE SETUP MODAL ==================== -->
<div id="firebase-modal" class="modal-overlay">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title"><i class="fas fa-database"></i> ุฅุนุฏุงุฏ Firebase</div>
        <div class="modal-subtitle">ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ</div>
      </div>
      <button class="modal-close" data-close-modal>โ</button>
    </div>
    <div class="modal-body">
      <p style="color:var(--text-secondary);font-size:13px;margin-bottom:20px;line-height:1.8">
        <i class="fas fa-info-circle" style="color:var(--primary-teal)"></i> 
        ูุฑุจุท ุงููุธุงู ูุน Firebaseุ ูุฌุจ ุฅูุดุงุก ูุดุฑูุน ูู 
        <a href="https://console.firebase.google.com" target="_blank" style="color:var(--primary-teal);text-decoration:underline">Firebase Console</a>
        ุซู ูุณุฎ ุงูุจูุงูุงุช ุงูุชุงููุฉ ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน:
      </p>
      
      <div class="form-group">
        <label class="form-label"><i class="fas fa-key"></i> API Key</label>
        <input type="text" id="firebase-api-key" class="form-input" placeholder="AIzaSyC...">
      </div>
      <div class="form-group">
        <label class="form-label"><i class="fas fa-globe"></i> Auth Domain</label>
        <input type="text" id="firebase-auth-domain" class="form-input" placeholder="your-project.firebaseapp.com">
      </div>
      <div class="form-group">
        <label class="form-label"><i class="fas fa-project-diagram"></i> Project ID</label>
        <input type="text" id="firebase-project-id" class="form-input" placeholder="your-project-id">
      </div>

      <div style="background:rgba(11,151,156,0.1);border:1px solid rgba(11,151,156,0.3);border-radius:8px;padding:12px;margin-top:16px">
        <p style="font-size:12px;color:var(--text-secondary);margin:0">
          <i class="fas fa-shield-alt" style="color:var(--primary-beige)"></i>
          <strong>ููุงุญุธุฉ ุฃูููุฉ:</strong> ุณูุชู ุญูุธ ูุฐู ุงูุจูุงูุงุช ูุญููุงู ูู ูุชุตูุญู ููุท. ูููุตุญ ุจุชูุนูู ููุงุนุฏ ุงูุฃูุงู ูู Firebase.
        </p>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" data-close-modal>ุฅูุบุงุก</button>
      <button id="btn-connect-firebase" class="btn btn-primary">
        <i class="fas fa-link"></i> ุงุชุตุงู
      </button>
    </div>
  </div>
</div>

<!-- ==================== TSV HELP MODAL ==================== -->
<div id="tsv-help-modal" class="modal-overlay">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title"><i class="fas fa-file-alt"></i> ููููุฉ ูุชุญ ููู TSV</div>
        <div class="modal-subtitle">ุฅุฑุดุงุฏุงุช ุงูุงุณุชุฎุฏุงู</div>
      </div>
      <button class="modal-close" data-close-modal>โ</button>
    </div>
    <div class="modal-body" style="line-height:1.8">
      <p style="color:var(--text-secondary);font-size:14px;margin-bottom:20px">
        ุชู ุชุตุฏูุฑ ุงูุจูุงูุงุช ุจุตูุบุฉ <strong>TSV</strong> (Tab-Separated Values) ูุถูุงู ุนุฑุถ ุตุญูุญ ูููุตูุต ุงูุนุฑุจูุฉ.
      </p>

      <div style="background:var(--bg-secondary);border-radius:8px;padding:16px;margin-bottom:16px">
        <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;color:var(--primary-beige)">
          <i class="fas fa-table"></i> ุทุฑููุฉ 1: ูุชุญ ูู Excel
        </h3>
        <ol style="font-size:13px;color:var(--text-secondary);padding-right:20px;margin:0">
          <li style="margin-bottom:8px">ุงูุชุญ Excel โ <strong>ุจูุงูุงุช (Data)</strong> โ <strong>ูู ูุต (From Text)</strong></li>
          <li style="margin-bottom:8px">ุงุฎุชุฑ ุงูููู ุงูููุตุฏูุฑ (.tsv)</li>
          <li style="margin-bottom:8px">ูู ูุนุงูุฌ ุงูุงุณุชูุฑุงุฏ ุงุฎุชุฑ: <strong>ูุญุฏุฏ (Delimited)</strong></li>
          <li style="margin-bottom:8px">ุญุฏุฏ <strong>Tab</strong> ููุงุตู</li>
          <li style="margin-bottom:8px">ุงุฎุชุฑ ุชุฑููุฒ <strong>UTF-8</strong> ูููุตูุต ุงูุนุฑุจูุฉ</li>
        </ol>
      </div>

      <div style="background:var(--bg-secondary);border-radius:8px;padding:16px">
        <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;color:var(--primary-beige)">
          <i class="fas fa-table"></i> ุทุฑููุฉ 2: ูุชุญ ูู Google Sheets
        </h3>
        <ol style="font-size:13px;color:var(--text-secondary);padding-right:20px;margin:0">
          <li style="margin-bottom:8px">ุงูุชุญ Google Sheets</li>
          <li style="margin-bottom:8px">ุงุฐูุจ ุฅูู <strong>ููู โ ุงุณุชูุฑุงุฏ</strong></li>
          <li style="margin-bottom:8px">ุงุฑูุน ููู TSV</li>
          <li style="margin-bottom:8px">ุงุฎุชุฑ <strong>Tab</strong> ูููุน ุงููุงุตู</li>
          <li>ุณูุชู ุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ ุชููุงุฆูุงู</li>
        </ol>
      </div>

      <p style="font-size:12px;color:var(--text-muted);margin-top:16px;text-align:center">
        <i class="fas fa-info-circle"></i>
        ููููู ุฃูุถุงู ูุชุญ ุงูููู ุจุฃู ูุญุฑุฑ ูุตูุต ูุฑุคูุฉ ุงูุจูุงูุงุช ุงูุฎุงู
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary btn-block" data-close-modal>
        <i class="fas fa-check"></i> ูููุช
      </button>
    </div>
  </div>
</div>

<script src="js/data.js"></script>
<script src="js/ui.js"></script>
<script src="js/firebase.js"></script>
<script src="js/app.js"></script>

<script>
// Set today as default date for booking
document.addEventListener('DOMContentLoaded', () => {
  const today = new Date().toISOString().split('T')[0];
  const bookingDate = document.getElementById('booking-date');
  const patientDate = document.getElementById('patient-date');
  if (bookingDate) bookingDate.value = today;
  if (patientDate) patientDate.value = today;

  // Handle canvas resize
  window.addEventListener('resize', () => {
    if (document.getElementById('page-dashboard').classList.contains('active')) {
      App.renderDashboard();
    }
  });
});
</script>
</body>
</html>